// ุงุณุชูุฑุงุฏ ุงูููุชุจุงุช ุงููุทููุจุฉ
//import { youtubedl, youtubedlv2 } from '@bochilteam/scraper'
import fetch from 'node-fetch';
import yts from 'yt-search';
import ytdl from 'ytdl-core';
import axios from 'axios';
import { ุชูุฒูู_ููุชููุจ } from '../lib/yt-savetube.js'
import { ุชูุฒูู_ุตูุช_ููุชููุจ } from '../lib/youtubedl.js';

const ุงูุญุฏ_ุงูุตูุชู = 725 * 1024 * 1024; // 725 ููุบุงุจุงูุช
const ุงูุญุฏ_ุงูููุฏูู = 425 * 1024 * 1024; // 425 ููุบุงุจุงูุช
const ุชุนุจูุฑ_ูุนุฑู_ููุชููุจ = /(?:youtu.be/|youtube.com/(?:watch?v=|embed/))([a-zA-Z0-9_-]{11})/;
const ุชุนูููุงุช_ุงููุณุชุฎุฏู = new Map();
const ุทูุจุงุช_ุงููุณุชุฎุฏู = {};

const ูุนุงูุฌ = async (m, { conn, command, args, text, usedPrefix }) => {
  if (!text) return m.reply(`*๐ค ูุงุฐุง ุชุจุญุซ ุนููุ ๐ค*\n*ุฃุฏุฎู ุงุณู ุงูุฃุบููุฉ*\n\n*ูุซุงู:*\n${usedPrefix + command} ุฅููููุง 420`);
  
  const ููุน_ุงูุชูุฒูู = command === 'ุชุดุบูู' || command === 'ููุณููู' ? 'ุตูุช' : 
                      command === 'ุชุดุบูู2' ? 'ููุฏูู' : 
                      command === 'ุชุดุบูู3' ? 'ุตูุช (ูุณุชูุฏ)' : 
                      command === 'ุชุดุบูู4' ? 'ููุฏูู (ูุณุชูุฏ)' : '';
  
  if (ุทูุจุงุช_ุงููุณุชุฎุฏู[m.sender]) return await conn.reply(m.chat, `โณ ููููุง @${m.sender.split('@')[0]}ุ ุงูุชุธุฑ ูููููุงุ ุฃูุช ุชููู ุจุงูุชูุฒูู ุจุงููุนู ๐\nุงูุชุธุฑ ุญุชู ููุชูู ุทูุจู ุงูุญุงูู ูุจู ุชูุฏูู ุทูุจ ุขุฎุฑ...`, ุชุนูููุงุช_ุงููุณุชุฎุฏู.get(m.sender) || m);
  
  ุทูุจุงุช_ุงููุณุชุฎุฏู[m.sender] = true;
  
  try {
    let ูุนุฑู_ุงูููุฏูู_ุงููุทููุจ = text.match(ุชุนุจูุฑ_ูุนุฑู_ููุชููุจ) || null;
    const ูุชุงุฆุฌ_ุชุดุบูู = await ุจุญุซ(args.join(' '));
    let ูุชุงุฆุฌ_ููุชููุจ = await yts(ูุนุฑู_ุงูููุฏูู_ุงููุทููุจ === null ? text : 'https://youtu.be/' + ูุนุฑู_ุงูููุฏูู_ุงููุทููุจ[1]);
    
    if (ูุนุฑู_ุงูููุฏูู_ุงููุทููุจ) {
      const ูุนุฑู_ุงูููุฏูู = ูุนุฑู_ุงูููุฏูู_ุงููุทููุจ[1];
      ูุชุงุฆุฌ_ููุชููุจ = ูุชุงุฆุฌ_ููุชููุจ.all.find(item => item.videoId === ูุนุฑู_ุงูููุฏูู) || ูุชุงุฆุฌ_ููุชููุจ.videos.find(item => item.videoId === ูุนุฑู_ุงูููุฏูู);
    }
    
    ูุชุงุฆุฌ_ููุชููุจ = ูุชุงุฆุฌ_ููุชููุจ.all?.[0] || ูุชุงุฆุฌ_ููุชููุจ.videos?.[0] || ูุชุงุฆุฌ_ููุชููุจ;
    
    const ูุต_ุงูุชุดุบูู = await conn.sendMessage(m.chat, { 
      text: `${ูุชุงุฆุฌ_ุชุดุบูู[0].title}
โใค     โ   ใค  โโใค     โทใค     โป

โฐ ุงููุฏุฉ: ${ุชุญููู_ุงูุซูุงูู(ูุชุงุฆุฌ_ุชุดุบูู[0].duration.seconds)}
๐๐ป ุงูุชุธุฑ ูุญุธุฉ ุจูููุง ุฃุฑุณู ${ููุน_ุงูุชูุฒูู}`,
      contextInfo: {
        forwardedNewsletterMessageInfo: {
          newsletterJid: '120363305025805187@newsletter',
          serverMessageId: '',
          newsletterName: 'ูููู_ุจูุช โจ๏ธ'
        },
        forwardingScore: 9999999,
        isForwarded: true,
        mentionedJid: null,
        externalAdReply: {
          showAdAttribution: false,
          renderLargerThumbnail: false,
          title: ูุชุงุฆุฌ_ุชุดุบูู[0].title,
          body: "ูููู_ุจูุช",
          containsAutoReply: true,
          mediaType: 1,
          thumbnailUrl: ูุชุงุฆุฌ_ุชุดุบูู[0].thumbnail,
          sourceUrl: "skyultraplus.com"
        }
      }
    }, { quoted: m });
    
    ุชุนูููุงุช_ุงููุณุชุฎุฏู.set(m.sender, ูุต_ุงูุชุดุบูู);

    const [ุฅุฏุฎุงู, ุฌูุฏุฉ_ุงูุฅุฏุฎุงู = command === 'ุชุดุบูู' || command === 'ููุณููู' || command === 'ุชุดุบูู3' ? '320' : '720'] = text.split(' ');
    const ุฌูุฏุงุช_ุงูุตูุช = ['64', '96', '128', '192', '256', '320'];
    const ุฌูุฏุงุช_ุงูููุฏูู = ['240', '360', '480', '720', '1080'];
    const ุฃูุฑ_ุตูุชู = command === 'ุชุดุบูู' || command === 'ููุณููู' || command === 'ุชุดุบูู3';
    const ุฌูุฏุฉ_ูุญุฏุฏุฉ = (ุฃูุฑ_ุตูุชู ? ุฌูุฏุงุช_ุงูุตูุช : ุฌูุฏุงุช_ุงูููุฏูู).includes(ุฌูุฏุฉ_ุงูุฅุฏุฎุงู) ? ุฌูุฏุฉ_ุงูุฅุฏุฎุงู : (ุฃูุฑ_ุตูุชู ? '320' : '720');
    const ูู_ุตูุช = command.toLowerCase().includes('mp3') || command.toLowerCase().includes('audio');
    const ุชูุณูู = ูู_ุตูุช ? 'mp3' : '720';

    const ูุงุฌูุงุช_ุงูุตูุช = [
      { ุฑุงุจุท: () => ุชูุฒูู_ููุชููุจ(ูุชุงุฆุฌ_ุชุดุบูู[0].url, ุชูุณูู), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.download, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => ุชูุฒูู_ุตูุช_ููุชููุจ(ูุชุงุฆุฌ_ุชุดุบูู[0].url, ุฌูุฏุฉ_ูุญุฏุฏุฉ, 'audio'), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.download, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://api.dorratz.com/v3/ytdl?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => {
        const mp3 = ุจูุงูุงุช.medias.find(media => media.quality === "160kbps" && media.extension === "mp3");
        return { ุจูุงูุงุช: mp3.url, ูุจุงุดุฑ: false };
      }},
      { ุฑุงุจุท: () => fetch(`https://api.neoxr.eu/api/youtube?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}&type=audio&quality=128kbps&apikey=GataDios`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.data.url, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://api.fgmods.xyz/api/downloader/ytmp4?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}&apikey=elrebelde21`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.dl_url, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://api.siputzx.my.id/api/d/ytmp4?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.dl, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`${info.apis}/download/ytmp3?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.status ? ุจูุงูุงุช.data.download.url : null, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://api.zenkey.my.id/api/download/ytmp3?apikey=zenkey&url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.download.url, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://exonity.tech/api/dl/playmp3?query=${ูุชุงุฆุฌ_ุชุดุบูู[0].title}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.download, ูุจุงุดุฑ: false }) }
    ];

    const ูุงุฌูุงุช_ุงูููุฏูู = [
      { ุฑุงุจุท: () => ุชูุฒูู_ููุชููุจ(ูุชุงุฆุฌ_ุชุดุบูู[0].url, '720'), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.download, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => ุชูุฒูู_ุตูุช_ููุชููุจ(ูุชุงุฆุฌ_ุชุดุบูู[0].url, ุฌูุฏุฉ_ูุญุฏุฏุฉ, 'video'), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.download, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://api.siputzx.my.id/api/d/ytmp4?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.dl, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://api.neoxr.eu/api/youtube?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}&type=video&quality=720p&apikey=GataDios`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.data.url, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://api.fgmods.xyz/api/downloader/ytmp4?url=${ูุชุงุฆุฌ_ุชุดุบูู[0].url}&apikey=elrebelde21`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.dl_url, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`${info.apis}/download/ytmp4?url=${encodeURIComponent(ูุชุงุฆุฌ_ุชุดุบูู[0].url)}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.status ? ุจูุงูุงุช.data.download.url : null, ูุจุงุดุฑ: false }) },
      { ุฑุงุจุท: () => fetch(`https://exonity.tech/api/dl/playmp4?query=${encodeURIComponent(ูุชุงุฆุฌ_ุชุดุบูู[0].title)}`).then(res => res.json()), ุงุณุชุฎุฑุงุฌ: (ุจูุงูุงุช) => ({ ุจูุงูุงุช: ุจูุงูุงุช.result.download, ูุจุงุดุฑ: false }) }
    ];

    const ุชูุฒูู = async (ูุงุฌูุงุช) => {
      let ุจูุงูุงุช_ุงููุณุงุฆุท = null;
      let ูุจุงุดุฑ = false;
      for (const ูุงุฌูุฉ of ูุงุฌูุงุช) {
        try {
          const ุจูุงูุงุช = await ูุงุฌูุฉ.ุฑุงุจุท();
          const { ุจูุงูุงุช: ุจูุงูุงุช_ูุณุชุฎุฑุฌุฉ, ูุจุงุดุฑ: ูุจุงุดุฑุฉ } = ูุงุฌูุฉ.ุงุณุชุฎุฑุงุฌ(ุจูุงูุงุช);
          if (ุจูุงูุงุช_ูุณุชุฎุฑุฌุฉ) {
            const ุญุฌู = await ุญุฌู_ุงูููู(ุจูุงูุงุช_ูุณุชุฎุฑุฌุฉ);
            if (ุญุฌู >= 1024) {
              ุจูุงูุงุช_ุงููุณุงุฆุท = ุจูุงูุงุช_ูุณุชุฎุฑุฌุฉ;
              ูุจุงุดุฑ = ูุจุงุดุฑุฉ;
              break;
            }
          }
        } catch (e) {
          console.log(`ุฎุทุฃ ูุน ูุงุฌูุฉ ุงูุจุฑูุฌุฉ: ${e}`);
          continue;
        }
      }
      return { ุจูุงูุงุช_ุงููุณุงุฆุท, ูุจุงุดุฑ };
    };

    if (command === 'ุชุดุบูู' || command === 'ููุณููู') {
      const { ุจูุงูุงุช_ุงููุณุงุฆุท, ูุจุงุดุฑ } = await ุชูุฒูู(ูุงุฌูุงุช_ุงูุตูุช);
      if (ุจูุงูุงุช_ุงููุณุงุฆุท) {
        const ุญุฌู_ุงูููู = await ุญุฌู_ุงูููู(ุจูุงูุงุช_ุงููุณุงุฆุท);
        if (ุญุฌู_ุงูููู > ุงูุญุฏ_ุงูุตูุชู) {
          await conn.sendMessage(m.chat, { document: ูุจุงุดุฑ ? ุจูุงูุงุช_ุงููุณุงุฆุท : { url: ุจูุงูุงุช_ุงููุณุงุฆุท }, mimetype: 'audio/mpeg', fileName: `${ูุชุงุฆุฌ_ุชุดุบูู[0].title}.mp3`, contextInfo: {} }, { quoted: m });
        } else {
          await conn.sendMessage(m.chat, { audio: ูุจุงุดุฑ ? ุจูุงูุงุช_ุงููุณุงุฆุท : { url: ุจูุงูุงุช_ุงููุณุงุฆุท }, mimetype: 'audio/mpeg', contextInfo: {} }, { quoted: m });
        }
      } else {
        //await m.react('โ');
      }
    }

    if (command === 'ุชุดุบูู2' || command === 'ููุฏูู') {
      const { ุจูุงูุงุช_ุงููุณุงุฆุท, ูุจุงุดุฑ } = await ุชูุฒูู(ูุงุฌูุงุช_ุงูููุฏูู);
      if (ุจูุงูุงุช_ุงููุณุงุฆุท) {
        const ุญุฌู_ุงูููู = await ุญุฌู_ุงูููู(ุจูุงูุงุช_ุงููุณุงุฆุท);
        const ุฎูุงุฑุงุช_ุงูุฑุณุงูุฉ = { fileName: `${ูุชุงุฆุฌ_ุชุดุบูู[0].title}.mp4`, caption: `๐ฐ ุฅููู ุงูููุฏูู ุงูุฎุงุต ุจู \n๐ฅ ุงูุนููุงู: ${ูุชุงุฆุฌ_ุชุดุบูู[0].title}`, mimetype: 'video/mp4' };
        if (ุญุฌู_ุงูููู > ุงูุญุฏ_ุงูููุฏูู) {
          await conn.sendMessage(m.chat, { document: ูุจุงุดุฑ ? ุจูุงูุงุช_ุงููุณุงุฆุท : { url: ุจูุงูุงุช_ุงููุณุงุฆุท }, ...ุฎูุงุฑุงุช_ุงูุฑุณุงูุฉ }, { quoted: m });
        } else {
          await conn.sendMessage(m.chat, { video: ูุจุงุดุฑ ? ุจูุงูุงุช_ุงููุณุงุฆุท : { url: ุจูุงูุงุช_ุงููุณุงุฆุท }, thumbnail: ูุชุงุฆุฌ_ุชุดุบูู[0].thumbnail, ...ุฎูุงุฑุงุช_ุงูุฑุณุงูุฉ }, { quoted: m });
        }
      } else {
        //await m.react('โ');
      }
    }

    if (command === 'ุชุดุบูู3' || command === 'ูุณุชูุฏ_ุตูุช') {
      const { ุจูุงูุงุช_ุงููุณุงุฆุท, ูุจุงุดุฑ } = await ุชูุฒูู(ูุงุฌูุงุช_ุงูุตูุช);
      if (ุจูุงูุงุช_ุงููุณุงุฆุท) {
        await conn.sendMessage(m.chat, { document: ูุจุงุดุฑ ? ุจูุงูุงุช_ุงููุณุงุฆุท : { url: ุจูุงูุงุช_ุงููุณุงุฆุท }, mimetype: 'audio/mpeg', fileName: `${ูุชุงุฆุฌ_ุชุดุบูู[0].title}.mp3`, contextInfo: {} }, { quoted: m });
      } else {
        await m.react('โ');
      }
    }

    if (command === 'ุชุดุบูู4' || command === 'ูุณุชูุฏ_ููุฏูู') {
      const { ุจูุงูุงุช_ุงููุณุงุฆุท, ูุจุงุดุฑ } = await ุชูุฒูู(ูุงุฌูุงุช_ุงูููุฏูู);
      if (ุจูุงูุงุช_ุงููุณุงุฆุท) {
        await conn.sendMessage(m.chat, { document: ูุจุงุดุฑ ? ุจูุงูุงุช_ุงููุณุงุฆุท : { url: ุจูุงูุงุช_ุงููุณุงุฆุท }, fileName: `${ูุชุงุฆุฌ_ุชุดุบูู[0].title}.mp4`, caption: `๐ฐ ุงูุนููุงู: ${ูุชุงุฆุฌ_ุชุดุบูู[0].title}`, thumbnail: ูุชุงุฆุฌ_ุชุดุบูู[0].thumbnail, mimetype: 'video/mp4'}, { quoted: m });
      } else {
        //await m.react('โ');
      }
    }
  } catch (ุฎุทุฃ) {
    console.error(ุฎุทุฃ);
    m.react("โ๏ธ");
  } finally {
    delete ุทูุจุงุช_ุงููุณุชุฎุฏู[m.sender];
  }
};

ูุนุงูุฌ.help = ['ุชุดุบูู', 'ุชุดุบูู2', 'ุชุดุบูู3', 'ุชุดุบูู4', 'ูุณุชูุฏ_ุตูุช'];
ูุนุงูุฌ.tags = ['ุชูุฒูู'];
ูุนุงูุฌ.command = ['ุชุดุบูู', 'ุชุดุบูู2', 'ุชุดุบูู3', 'ุชุดุบูู4', 'ุตูุช', 'ููุฏูู', 'ูุณุชูุฏ_ุตูุช', 'ูุณุชูุฏ_ููุฏูู', 'ููุณููู'];
ูุนุงูุฌ.register = true;
export default ูุนุงูุฌ;

async function ุจุญุซ(ุงุณุชุนูุงู, ุฎูุงุฑุงุช = {}) {
  const ูุชุงุฆุฌ_ุงูุจุญุซ = await yts.search({ query: ุงุณุชุนูุงู, hl: 'es', gl: 'ES', ...ุฎูุงุฑุงุช });
  return ูุชุงุฆุฌ_ุงูุจุญุซ.videos;
}

function ุชูุณูู_ุงูุฃุฑูุงู(ุฑูู) {
  const ุชุนุจูุฑ = /(\d)(?=(\d{3})+(?!\d))/g;
  const ุจุฏูู = '$1.';
  const ูุตูููุฉ = ุฑูู.toString().split('.');
  ูุตูููุฉ[0] = ูุตูููุฉ[0].replace(ุชุนุจูุฑ, ุจุฏูู);
  return ูุตูููุฉ[1] ? ูุตูููุฉ.join('.') : ูุตูููุฉ[0];
}

function ุชุญููู_ุงูุซูุงูู(ุซูุงูู) {
  ุซูุงูู = Number(ุซูุงูู);
  const ุฃูุงู = Math.floor(ุซูุงูู / (3600 * 24));
  const ุณุงุนุงุช = Math.floor((ุซูุงูู % (3600 * 24)) / 3600);
  const ุฏูุงุฆู = Math.floor((ุซูุงูู % 3600) / 60);
  const ุซูุงู = Math.floor(ุซูุงูู % 60);
  const ุนุฑุถ_ุงูุฃูุงู = ุฃูุงู > 0 ? ุฃูุงู + (ุฃูุงู == 1 ? ' ูููุ ' : ' ุฃูุงูุ ') : '';
  const ุนุฑุถ_ุงูุณุงุนุงุช = ุณุงุนุงุช > 0 ? ุณุงุนุงุช + (ุณุงุนุงุช == 1 ? ' ุณุงุนุฉุ ' : ' ุณุงุนุงุชุ ') : '';
  const ุนุฑุถ_ุงูุฏูุงุฆู = ุฏูุงุฆู > 0 ? ุฏูุงุฆู + (ุฏูุงุฆู == 1 ? ' ุฏูููุฉุ ' : ' ุฏูุงุฆูุ ') : '';
  const ุนุฑุถ_ุงูุซูุงูู = ุซูุงู > 0 ? ุซูุงู + (ุซูุงู == 1 ? ' ุซุงููุฉ' : ' ุซูุงูู') : '';
  return ุนุฑุถ_ุงูุฃูุงู + ุนุฑุถ_ุงูุณุงุนุงุช + ุนุฑุถ_ุงูุฏูุงุฆู + ุนุฑุถ_ุงูุซูุงูู;
}

const ุฌูุจ_ุงููุฎุฒู_ุงููุคูุช = async (ุฑุงุจุท) => {
  try {
    const ุงุณุชุฌุงุจุฉ = await fetch(ุฑุงุจุท);
    const ูุฎุฒู_ูุคูุช = await ุงุณุชุฌุงุจุฉ.arrayBuffer();
    return Buffer.from(ูุฎุฒู_ูุคูุช);
  } catch (ุฎุทุฃ) {
    console.error("ุฎุทุฃ ูู ุฌูุจ ุงููุฎุฒู ุงููุคูุช", ุฎุทุฃ);
    throw new Error("ุฎุทุฃ ูู ุฌูุจ ุงููุฎุฒู ุงููุคูุช");
  }
};

async function ุญุฌู_ุงูููู(ุฑุงุจุท) {
  try {
    const ุงุณุชุฌุงุจุฉ = await fetch(ุฑุงุจุท, { method: 'HEAD' });
    return parseInt(ุงุณุชุฌุงุจุฉ.headers.get('content-length') || 0);
  } catch {
    return 0; // ุฅุฐุง ูุดูุ ููุชุฑุถ 0
  }
}
